parameters:
- name: configuration
  type: string
  default: Release

steps:
- task: UseDotNet@2
  displayName: Install .NET SDK
  inputs:
    packageType: sdk
    version: 10.0.x # https://github.com/dotnet/core/blob/main/release-notes/releases-index.json

- script: dotnet test --configuration ${{ parameters.configuration }} --logger "trx"
  displayName: Build and Test

- task: PublishTestResults@2
  inputs:
    testResultsFormat: VSTest
    testResultsFiles: '**/*.trx'
    failTaskOnFailedTests: true