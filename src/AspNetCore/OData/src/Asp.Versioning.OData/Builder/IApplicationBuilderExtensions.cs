// Copyright (c) .NET Foundation and contributors. All rights reserved.

#pragma warning disable IDE0130

namespace Microsoft.AspNetCore.Builder;

using Asp.Versioning.OData.Batch;

/// <summary>
/// Provides extension methods for <see cref="IApplicationBuilder"/>.
/// </summary>
[CLSCompliant( false )]
public static class IApplicationBuilderExtensions
{
    /// <param name="app">The current <see cref="IApplicationBuilder"/>.</param>
    /// <returns>The original <see cref="IApplicationBuilder"/>.</returns>
    extension( IApplicationBuilder app )
    {
        /// <summary>
        /// Uses API versioned OData batch middleware.
        /// </summary>
        public IApplicationBuilder UseVersionedODataBatching()
        {
            ArgumentNullException.ThrowIfNull( app );
            return app.UseMiddleware<VersionedODataBatchMiddleware>();
        }
    }
}